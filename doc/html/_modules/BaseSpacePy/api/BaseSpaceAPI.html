

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>BaseSpacePy.api.BaseSpaceAPI &mdash; BaseSpacePy 0.2 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="BaseSpacePy 0.2 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../../index.html">BaseSpacePy 0.2 documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for BaseSpacePy.api.BaseSpaceAPI</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">pycurl</span>
<span class="kn">import</span> <span class="nn">httplib</span>
<span class="kn">import</span> <span class="nn">cStringIO</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">mkdtemp</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">ConfigParser</span>
<span class="kn">import</span> <span class="nn">urlparse</span>
<span class="c">#import requests</span>

<span class="kn">from</span> <span class="nn">BaseSpacePy.api.APIClient</span> <span class="kn">import</span> <span class="n">APIClient</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.api.BaseAPI</span> <span class="kn">import</span> <span class="n">BaseAPI</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.api.BaseSpaceException</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.model.MultipartFileTransfer</span> <span class="kn">import</span> <span class="n">MultipartUpload</span> <span class="k">as</span> <span class="n">mpu</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.model.MultipartFileTransfer</span> <span class="kn">import</span> <span class="n">MultipartDownload</span> <span class="k">as</span> <span class="n">mpd</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.model.QueryParameters</span> <span class="kn">import</span> <span class="n">QueryParameters</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.model</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Uris for obtaining a access token, user verification code, and app trigger information</span>
<span class="n">tokenURL</span>                   <span class="o">=</span> <span class="s">&#39;/oauthv2/token&#39;</span>
<span class="n">deviceURL</span>                  <span class="o">=</span> <span class="s">&quot;/oauthv2/deviceauthorization&quot;</span>
<span class="n">webAuthorize</span>               <span class="o">=</span> <span class="s">&#39;/oauth/authorize&#39;</span>


<span class="k">class</span> <span class="nc">BaseSpaceAPI</span><span class="p">(</span><span class="n">BaseAPI</span><span class="p">):</span>
<div class="viewcode-block" id="BaseSpaceAPI"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI">[docs]</a>    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    The main API class used for all communication with the REST server</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clientKey</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">clientSecret</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">apiServer</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">appSessionId</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">AccessToken</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="s">&#39;DEFAULT&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        The following arguments are required in either the constructor or a config file (~/.basespacepy.cfg):        </span>
<span class="sd">        </span>
<span class="sd">        :param clientKey: the client key of the user&#39;s app; required in constructor or config file</span>
<span class="sd">        :param clientSecret: the client secret of the user&#39;s app; required in constructor or config file</span>
<span class="sd">        :param apiServer: the URL of the BaseSpace api server; required in constructor or config file</span>
<span class="sd">        :param version: the version of the BaseSpace API; required in constructor or config file</span>
<span class="sd">        :param appSessionId: optional, though may be needed for AppSession-related methods</span>
<span class="sd">        :param AccessToken: optional, though will be needed for most methods (except to obtain a new access token)</span>
<span class="sd">        :param timeout: optional, timeout period in seconds for api calls, default 10 </span>
<span class="sd">        :param profile: optional, name of profile in config file, default &#39;DEFAULT&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>                
        <span class="n">cred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_setCredentials</span><span class="p">(</span><span class="n">clientKey</span><span class="p">,</span> <span class="n">clientSecret</span><span class="p">,</span> <span class="n">apiServer</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">appSessionId</span><span class="p">,</span> <span class="n">AccessToken</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">appSessionId</span>   <span class="o">=</span> <span class="n">cred</span><span class="p">[</span><span class="s">&#39;appSessionId&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span>            <span class="o">=</span> <span class="n">cred</span><span class="p">[</span><span class="s">&#39;clientKey&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secret</span>         <span class="o">=</span> <span class="n">cred</span><span class="p">[</span><span class="s">&#39;clientSecret&#39;</span><span class="p">]</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span>        <span class="o">=</span> <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiVersion&#39;</span><span class="p">]</span>        
        <span class="k">if</span> <span class="s">&#39;profile&#39;</span> <span class="ow">in</span> <span class="n">cred</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profile</span>    <span class="o">=</span> <span class="n">cred</span><span class="p">[</span><span class="s">&#39;profile&#39;</span><span class="p">]</span>
        <span class="c"># TODO this replacement won&#39;t work for all environments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weburl</span>         <span class="o">=</span> <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiServer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;api.&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        
        <span class="n">apiServerAndVersion</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urljoin</span><span class="p">(</span><span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiServer&#39;</span><span class="p">],</span> <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiVersion&#39;</span><span class="p">])</span>        
        <span class="nb">super</span><span class="p">(</span><span class="n">BaseSpaceAPI</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">cred</span><span class="p">[</span><span class="s">&#39;accessToken&#39;</span><span class="p">],</span> <span class="n">apiServerAndVersion</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setCredentials</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clientKey</span><span class="p">,</span> <span class="n">clientSecret</span><span class="p">,</span> <span class="n">apiServer</span><span class="p">,</span> <span class="n">apiVersion</span><span class="p">,</span> <span class="n">appSessionId</span><span class="p">,</span> <span class="n">accessToken</span><span class="p">,</span> <span class="n">profile</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;            </span>
<span class="sd">        Returns credentials from constructor, config file, or default (for optional args), in this priority order</span>
<span class="sd">        for each credential.</span>
<span class="sd">        If clientKey was provided only in config file, include &#39;name&#39; (in return dict) with profile name.</span>
<span class="sd">        Raises exception if required creds aren&#39;t provided (clientKey, clientSecret, apiServer, apiVersion).</span>

<span class="sd">        :param clientKey: the client key of the user&#39;s app</span>
<span class="sd">        :param clientSecret: the client secret of the user&#39;s app</span>
<span class="sd">        :param apiServer: the URL of the BaseSpace api server</span>
<span class="sd">        :param version: the version of the BaseSpace API</span>
<span class="sd">        :param appSessionId: the AppSession Id</span>
<span class="sd">        :param AccessToken: an access token        </span>
<span class="sd">        :param profile: name of profile in config file        </span>
<span class="sd">        :returns: dictionary with credentials from constructor, config file, or default (for optional args), in this priority order.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">lcl_cred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getLocalCredentials</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
        <span class="n">cred</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c"># required credentials</span>
        <span class="k">if</span> <span class="n">clientKey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">cred</span><span class="p">[</span><span class="s">&#39;clientKey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clientKey</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;clientKey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lcl_cred</span><span class="p">[</span><span class="s">&#39;clientKey&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>        
                <span class="k">raise</span> <span class="n">CredentialsException</span><span class="p">(</span><span class="s">&#39;Client Key not available - please provide in BaseSpaceAPI constructor or config file&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># set profile name</span>
                <span class="k">if</span> <span class="s">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">lcl_cred</span><span class="p">:</span>
                    <span class="n">cred</span><span class="p">[</span><span class="s">&#39;profile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lcl_cred</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cred</span><span class="p">[</span><span class="s">&#39;profile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">profile</span>
        <span class="k">if</span> <span class="n">clientSecret</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">cred</span><span class="p">[</span><span class="s">&#39;clientSecret&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clientSecret</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;clientSecret&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lcl_cred</span><span class="p">[</span><span class="s">&#39;clientSecret&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>        
                <span class="k">raise</span> <span class="n">CredentialsException</span><span class="p">(</span><span class="s">&#39;Client Secret not available - please provide in BaseSpaceAPI constructor or config file&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">apiServer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiServer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiServer</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiServer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lcl_cred</span><span class="p">[</span><span class="s">&#39;apiServer&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>        
                <span class="k">raise</span> <span class="n">CredentialsException</span><span class="p">(</span><span class="s">&#39;API Server URL not available - please provide in BaseSpaceAPI constructor or config file&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">apiVersion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiVersion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiVersion</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiVersion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lcl_cred</span><span class="p">[</span><span class="s">&#39;apiVersion&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>        
                <span class="k">raise</span> <span class="n">CredentialsException</span><span class="p">(</span><span class="s">&#39;API version available - please provide in BaseSpaceAPI constructor or config file&#39;</span><span class="p">)</span>        
        <span class="c"># Optional credentials </span>
        <span class="k">if</span> <span class="n">appSessionId</span><span class="p">:</span>
            <span class="n">cred</span><span class="p">[</span><span class="s">&#39;appSessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">appSessionId</span>
        <span class="k">elif</span> <span class="s">&#39;apiVersion&#39;</span> <span class="ow">in</span> <span class="n">lcl_cred</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;appSessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lcl_cred</span><span class="p">[</span><span class="s">&#39;appSessionId&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;appSessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">appSessionId</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cred</span><span class="p">[</span><span class="s">&#39;appSessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">appSessionId</span>
        
        <span class="k">if</span> <span class="n">accessToken</span><span class="p">:</span>
            <span class="n">cred</span><span class="p">[</span><span class="s">&#39;accessToken&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">accessToken</span>
        <span class="k">elif</span> <span class="s">&#39;accessToken&#39;</span> <span class="ow">in</span> <span class="n">lcl_cred</span><span class="p">:</span>            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;accessToken&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lcl_cred</span><span class="p">[</span><span class="s">&#39;accessToken&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;accessToken&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">accessToken</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cred</span><span class="p">[</span><span class="s">&#39;accessToken&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">accessToken</span>
        
        <span class="k">return</span> <span class="n">cred</span>            

    <span class="k">def</span> <span class="nf">_getLocalCredentials</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns credentials from local config file (~/.basespacepy.cfg)</span>
<span class="sd">        If some or all credentials are missing, they aren&#39;t included the in the returned dict</span>
<span class="sd">        </span>
<span class="sd">        :param profile: Profile name from local config file </span>
<span class="sd">        :returns: A dictionary with credentials from local config file </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">config_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">&#39;~/.basespacepy.cfg&#39;</span><span class="p">)</span>
        <span class="n">cred</span> <span class="o">=</span> <span class="p">{}</span>        
        <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">SafeConfigParser</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">config_file</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span> <span class="ow">and</span> <span class="n">profile</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;default&#39;</span><span class="p">:</span>                
                <span class="k">raise</span> <span class="n">CredentialsException</span><span class="p">(</span><span class="s">&quot;Profile name &#39;</span><span class="si">%s</span><span class="s">&#39; not present in config file </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">config_file</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;clientKey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="s">&quot;clientKey&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;clientSecret&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="s">&quot;clientSecret&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiServer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="s">&quot;apiServer&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;apiVersion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="s">&quot;apiVersion&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span> 
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;appSessionId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="s">&quot;appSessionId&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cred</span><span class="p">[</span><span class="s">&#39;accessToken&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="s">&quot;accessToken&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                <span class="k">pass</span>            
        <span class="k">return</span> <span class="n">cred</span>

    <span class="k">def</span> <span class="nf">getAppSessionById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">):</span>
<div class="viewcode-block" id="BaseSpaceAPI.getAppSessionById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppSessionById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get metadata about an AppSession.</span>
<span class="sd">        Note that the client key and secret must match those of the AppSession&#39;s Application.</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the AppSession</span>
<span class="sd">        :returns: An AppSession instance</span>
<span class="sd">        &#39;&#39;&#39;</span>            
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAppSession</span><span class="p">(</span><span class="n">Id</span><span class="o">=</span><span class="n">Id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getAppSession</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppSession"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppSession">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get metadata about an AppSession.         </span>
<span class="sd">        Note that the client key and secret must match those of the AppSession&#39;s Application.    </span>
<span class="sd">        </span>
<span class="sd">        :param Id: an AppSession Id; if not provided, the AppSession Id of the BaseSpaceAPI instance will be used </span>
<span class="sd">        :returns: An AppSession instance                </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">Id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">Id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">appSessionId</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AppSessionException</span><span class="p">(</span><span class="s">&quot;An AppSession Id is required&quot;</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">apiServer</span> <span class="o">+</span> <span class="s">&#39;/appsessions/{AppSessionId}&#39;</span>        
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{AppSessionId}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>        
        <span class="n">response</span> <span class="o">=</span> <span class="n">cStringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">pycurl</span><span class="o">.</span><span class="n">Curl</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">pycurl</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">pycurl</span><span class="o">.</span><span class="n">USERPWD</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">secret</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">WRITEFUNCTION</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">resp_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__deserializeAppSessionResponse__</span><span class="p">(</span><span class="n">resp_dict</span><span class="p">)</span> 

    <span class="k">def</span> <span class="nf">__deserializeAppSessionResponse__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span></div>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Converts a AppSession response from the API server to an AppSession object.        </span>
<span class="sd">        </span>
<span class="sd">        :param response: a dictionary (decoded from json) from getting an AppSession from the api server</span>
<span class="sd">        :returns: An AppSession instance                </span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AppSessionException</span><span class="p">(</span><span class="s">&#39;BaseSpace error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;Message&#39;</span><span class="p">])</span>                    
        <span class="n">tempApi</span> <span class="o">=</span> <span class="n">APIClient</span><span class="p">(</span><span class="n">AccessToken</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">apiServer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">apiServer</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">tempApi</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">AppSessionResponse</span><span class="o">.</span><span class="n">AppSessionResponse</span><span class="p">)</span>            
        <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">Response</span><span class="o">.</span><span class="n">__deserializeReferences__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getAppSessionPropertiesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<div class="viewcode-block" id="BaseSpaceAPI.getAppSessionPropertiesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppSessionPropertiesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the Properties of an AppSession</span>
<span class="sd">        </span>
<span class="sd">        :param Id: An AppSession Id</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: A PropertyList instance            </span>
<span class="sd">        &#39;&#39;&#39;</span>                
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>            
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appsessions/{Id}/properties&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>                
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">PropertiesResponse</span><span class="o">.</span><span class="n">PropertiesResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getAppSessionPropertyByName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppSessionPropertyByName"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppSessionPropertyByName">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the multi-value Property of the provided AppSession that has the provided Property name.</span>
<span class="sd">        Note - this method (and REST API) is supported for ONLY multi-value Properties.</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The AppSessionId</span>
<span class="sd">        :param name: Name of the multi-value property to retrieve</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: A multi-value propertylist instance such as MultiValuePropertyAppResultsList (depending on the Property Type)        </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appsessions/{Id}/properties/{Name}/items&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Name}&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">MultiValuePropertyResponse</span><span class="o">.</span><span class="n">MultiValuePropertyResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                    
    <span class="k">def</span> <span class="nf">getAppSessionInputsById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppSessionInputsById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppSessionInputsById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the input properties of an AppSession</span>
<span class="sd">        </span>
<span class="sd">        :param Id: An AppSessionId</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a dictionary of input properties, keyed by input Name      </span>
<span class="sd">        &#39;&#39;&#39;</span>            
        <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAppSessionPropertiesById</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">props</span><span class="o">.</span><span class="n">Items</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;^Input\.(.+)&quot;</span><span class="p">,</span> <span class="n">prop</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">inputs</span><span class="p">[</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">prop</span>
        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">setAppSessionState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">Status</span><span class="p">,</span> <span class="n">Summary</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.setAppSessionState"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.setAppSessionState">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Set the Status and StatusSummary of an AppSession in BaseSpace.</span>
<span class="sd">        Note - once Status is set to Completed or Aborted, no further changes can made.</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the AppSession</span>
<span class="sd">        :param Status: The AppSession status string, must be one of: Running, Complete, NeedsAttention, TimedOut, Aborted</span>
<span class="sd">        :param Summary: The status summary string</span>
<span class="sd">        :returns: An updated AppSession instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appsessions/{Id}&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">postData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">statusAllowed</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;running&#39;</span><span class="p">,</span> <span class="s">&#39;complete&#39;</span><span class="p">,</span> <span class="s">&#39;needsattention&#39;</span><span class="p">,</span> <span class="s">&#39;timedout&#39;</span><span class="p">,</span> <span class="s">&#39;aborted&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Status</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">statusAllowed</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AppSessionException</span><span class="p">(</span><span class="s">&quot;AppSession state must be one of: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">statusAllowed</span><span class="p">))</span>
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;statussummary&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Summary</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">AppSessionResponse</span><span class="o">.</span><span class="n">AppSessionResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__deserializeObject__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dct</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span></div>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Converts API response into object instances for Projects, Samples, and AppResults.</span>
<span class="sd">        For other types, the input value is simply returned.</span>
<span class="sd">        </span>
<span class="sd">        (Currently called by Sample&#39;s getReferencedAppResults() and </span>
<span class="sd">        AppSessionLaunchObject&#39;s __deserializeObject__() to serialize References)</span>

<span class="sd">        :param dct: dictionary from an API response (converted from JSON) for a BaseSpace item (eg., a Project)</span>
<span class="sd">        :param type: BaseSpace item name</span>
<span class="sd">        :returns: for types Project, Sample, and AppResult, an object is returned; for other types, the input dict is returned.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">tempApi</span> <span class="o">=</span> <span class="n">APIClient</span><span class="p">(</span><span class="n">AccessToken</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">apiServer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">apiServer</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;project&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tempApi</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">dct</span><span class="p">,</span> <span class="n">Project</span><span class="o">.</span><span class="n">Project</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;sample&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tempApi</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">dct</span><span class="p">,</span> <span class="n">Sample</span><span class="o">.</span><span class="n">Sample</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;appresult&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tempApi</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">dct</span><span class="p">,</span> <span class="n">AppResult</span><span class="o">.</span><span class="n">AppResult</span><span class="p">)</span>        
        <span class="k">return</span> <span class="n">dct</span>            
                
    <span class="k">def</span> <span class="nf">getAccess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">accessType</span><span class="o">=</span><span class="s">&#39;write&#39;</span><span class="p">,</span> <span class="n">web</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">redirectURL</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
<div class="viewcode-block" id="BaseSpaceAPI.getAccess"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAccess">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Requests access to the provided BaseSpace object.</span>
<span class="sd">        </span>
<span class="sd">        :param obj: The data object we wish to get access to -- must be a Project, Sample, AppResult, or Run.</span>
<span class="sd">        :param accessType: (Optional) the type of access (browse|read|write|create), default is write. Create is only supported for Projects.</span>
<span class="sd">        :param web: (Optional) true if the App is web-based, default is false meaning a device based app</span>
<span class="sd">        :param redirectURL: (Optional) Redirect URL for the web-based case</span>
<span class="sd">        :param state: (Optional) A parameter that will passed through to the redirect response.</span>
<span class="sd">        :raises ModelNotSupportedException: for classes of objects not supported by this method</span>
<span class="sd">        :returns: for device requests, a dictionary of server response; for web requests, a url to to send the user to</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">scopeStr</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">getAccessStr</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="n">accessType</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ModelNotSupportedException</span><span class="p">(</span><span class="s">&quot;Error - the class of the provided object is not supported for this method&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">web</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getWebVerificationCode</span><span class="p">(</span><span class="n">scopeStr</span><span class="p">,</span> <span class="n">redirectURL</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getVerificationCode</span><span class="p">(</span><span class="n">scopeStr</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">getVerificationCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getVerificationCode"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getVerificationCode">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        For non-web applications (eg. devices), returns the device code </span>
<span class="sd">        and verification url for the user to approve access to a specific data scope.  </span>
<span class="sd">            </span>
<span class="sd">        :param scope: The scope that access is requested for (e.g. &#39;browse project 123&#39;)</span>
<span class="sd">        :returns: dictionary of server response</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;client_id&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;scope&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="p">),(</span><span class="s">&#39;response_type&#39;</span><span class="p">,</span> <span class="s">&#39;device_code&#39;</span><span class="p">)]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__makeCurlRequest__</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">apiServer</span> <span class="o">+</span> <span class="n">deviceURL</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getWebVerificationCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">redirectURL</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getWebVerificationCode"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getWebVerificationCode">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Generates the URL the user should be redirected to for web-based authentication</span>
<span class="sd">         </span>
<span class="sd">        :param scope: The scope that access is requested for (e.g. &#39;browse project 123&#39;)</span>
<span class="sd">        :param redirectURL: The redirect URL</span>
<span class="sd">        :param state: (Optional) A state parameter that will passed through to the redirect response</span>
<span class="sd">        :returns: a url </span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;client_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="s">&#39;redirect_uri&#39;</span><span class="p">:</span> <span class="n">redirectURL</span><span class="p">,</span> <span class="s">&#39;scope&#39;</span><span class="p">:</span> <span class="n">scope</span><span class="p">,</span> <span class="s">&#39;response_type&#39;</span><span class="p">:</span> <span class="s">&#39;code&#39;</span><span class="p">,</span> <span class="s">&quot;state&quot;</span><span class="p">:</span> <span class="n">state</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weburl</span> <span class="o">+</span> <span class="n">webAuthorize</span> <span class="o">+</span> <span class="s">&#39;?&#39;</span> <span class="o">+</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">obtainAccessToken</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">grantType</span><span class="o">=</span><span class="s">&#39;device&#39;</span><span class="p">,</span> <span class="n">redirect_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.obtainAccessToken"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.obtainAccessToken">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a user specific access token, for either device (non-web) or web apps.   </span>
<span class="sd">        </span>
<span class="sd">        :param code: The device code returned by the getVerificationCode method</span>
<span class="sd">        :param grantType: Grant-type may be either &#39;device&#39; for non-web apps (default), or &#39;authorization_code&#39; for web apps </span>
<span class="sd">        :param redirect_uri: The uri to redirect to; required for web apps only.</span>
<span class="sd">        :raises OAuthException: when redirect_uri isn&#39;t provided by web apps</span>
<span class="sd">        :returns: an access token</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">grantType</span><span class="o">==</span><span class="s">&#39;authorization_code&#39;</span> <span class="ow">and</span> <span class="n">redirect_uri</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">OAuthException</span><span class="p">(</span><span class="s">&#39;A Redirect URI is requred for web apps to obtain access tokens&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;client_id&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;client_secret&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">secret</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;code&#39;</span><span class="p">,</span> <span class="n">code</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;grant_type&#39;</span><span class="p">,</span> <span class="n">grantType</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;redirect_uri&#39;</span><span class="p">,</span> <span class="n">redirect_uri</span><span class="p">)]</span>
        <span class="n">resp_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__makeCurlRequest__</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">apiServer</span> <span class="o">+</span> <span class="n">tokenURL</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">resp_dict</span><span class="p">[</span><span class="s">&#39;access_token&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">updatePrivileges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">grantType</span><span class="o">=</span><span class="s">&#39;device&#39;</span><span class="p">,</span> <span class="n">redirect_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.updatePrivileges"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.updatePrivileges">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieves a user-specific access token, and sets the token on the current object.</span>

<span class="sd">        :param code: The device code returned by the getVerificationCode method</span>
<span class="sd">        :param grantType: Grant-type may be either &#39;device&#39; for non-web apps (default), or &#39;authorization_code&#39; for web apps </span>
<span class="sd">        :param redirect_uri: The uri to redirect to; required for web apps only.</span>
<span class="sd">        :returns: None        </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obtainAccessToken</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">grantType</span><span class="o">=</span><span class="n">grantType</span><span class="p">,</span> <span class="n">redirect_uri</span><span class="o">=</span><span class="n">redirect_uri</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAccessToken</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
            
    <span class="k">def</span> <span class="nf">createProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Name</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.createProject"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.createProject">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a project with the specified name and returns a project object. </span>
<span class="sd">        If a project with this name already exists, the existing project is returned.</span>
<span class="sd">        </span>
<span class="sd">        :param Name: Name of the project</span>
<span class="sd">        :returns: a Project instance of the newly created project        </span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">resourcePath</span>            <span class="o">=</span> <span class="s">&#39;/projects/&#39;</span>        
        <span class="n">method</span>                  <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">queryParams</span>             <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span>            <span class="o">=</span> <span class="p">{}</span>
        <span class="n">postData</span>                <span class="o">=</span> <span class="p">{}</span>
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;Name&#39;</span><span class="p">]</span>        <span class="o">=</span> <span class="n">Name</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">ProjectResponse</span><span class="o">.</span><span class="n">ProjectResponse</span><span class="p">,</span> 
            <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span>
            <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                
    <span class="k">def</span> <span class="nf">getUserById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getUserById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getUserById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the User object corresponding to User Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the user</span>
<span class="sd">        :returns: a User instance</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/users/{Id}&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">UserResponse</span><span class="o">.</span><span class="n">UserResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
           
    <span class="k">def</span> <span class="nf">getAppResultById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppResultById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppResultById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns an AppResult object corresponding to Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the AppResult</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: an AppResult instance</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appresults/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">AppResultResponse</span><span class="o">.</span><span class="n">AppResultResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getAppResultPropertiesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppResultPropertiesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppResultPropertiesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the Properties of an AppResult object corresponding to AppResult Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the AppResult</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a PropertyList instance</span>
<span class="sd">        &#39;&#39;&#39;</span>                    
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>        
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appresults/{Id}/properties&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>                
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">PropertiesResponse</span><span class="o">.</span><span class="n">PropertiesResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getAppResultFilesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppResultFilesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppResultFilesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of File object for an AppResult</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the AppResult</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of File instances </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appresults/{Id}/files&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">File</span><span class="o">.</span><span class="n">File</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>        

    <span class="k">def</span> <span class="nf">getAppResultFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppResultFiles"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppResultFiles">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        * Deprecated in favor of getAppResultFileById() *</span>
<span class="sd">        </span>
<span class="sd">        Returns a list of File object for an AppResult</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the AppResult</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of File instances </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAppResultFilesById</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getProjectById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getProjectById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getProjectById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Request a project object by Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the project</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a Project instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">ProjectResponse</span><span class="o">.</span><span class="n">ProjectResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getProjectPropertiesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getProjectPropertiesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getProjectPropertiesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Request the Properties of a project object by Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the project</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a ProjectList instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>       
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{Id}/properties&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">PropertiesResponse</span><span class="o">.</span><span class="n">PropertiesResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
           
    <span class="k">def</span> <span class="nf">getProjectByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getProjectByUser"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getProjectByUser">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list available projects for the current User.</span>
<span class="sd">                </span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of Project instances</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>               
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/users/current/projects&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">Project</span><span class="o">.</span><span class="n">Project</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
       
    <span class="k">def</span> <span class="nf">getAccessibleRunsByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAccessibleRunsByUser"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAccessibleRunsByUser">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of accessible runs for the current User</span>
<span class="sd">                </span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of Run instances</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>               
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/users/current/runs&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">Run</span><span class="o">.</span><span class="n">Run</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">getRunById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getRunById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getRunById">[docs]</a>        <span class="sd">&#39;&#39;&#39;        </span>
<span class="sd">        Request a run object by Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the run</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a Run instance</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/runs/{Id}&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>            
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">RunResponse</span><span class="o">.</span><span class="n">RunResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">getRunPropertiesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getRunPropertiesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getRunPropertiesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;        </span>
<span class="sd">        Request the Properties of a run object by Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the run</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a PropertyList instance</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/runs/{Id}/properties&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">PropertiesResponse</span><span class="o">.</span><span class="n">PropertiesResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getRunFilesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getRunFilesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getRunFilesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;        </span>
<span class="sd">        Request the files associated with a Run, using the Run&#39;s Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the run</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of Run instances</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/runs/{Id}/files&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>            
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>         
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">File</span><span class="o">.</span><span class="n">File</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getRunSamplesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getRunSamplesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getRunSamplesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;        </span>
<span class="sd">        Request the Samples associated with a Run, using the Run&#39;s Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the run</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of Sample instances</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/runs/{Id}/samples&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>            
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>         
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">Sample</span><span class="o">.</span><span class="n">Sample</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
  
    <span class="k">def</span> <span class="nf">getAppResultsByProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">statuses</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppResultsByProject"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppResultsByProject">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of AppResult object associated with the project with Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The project id</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :param statuses: An (optional) list of AppResult statuses to filter by, eg., &#39;complete&#39;</span>
<span class="sd">        :returns: a list of AppResult instances</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">statuses</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">statuses</span> <span class="o">=</span> <span class="p">[]</span>               
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{Id}/appresults&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">statuses</span><span class="p">):</span> 
            <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;Statuses&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">statuses</span><span class="p">)</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">AppResult</span><span class="o">.</span><span class="n">AppResult</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getSamplesByProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getSamplesByProject"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getSamplesByProject">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of samples associated with a project with Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the project</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of Sample instances</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{Id}/samples&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">Sample</span><span class="o">.</span><span class="n">Sample</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getSampleById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getSampleById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getSampleById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a Sample object</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the sample</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a Sample instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>        
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/samples/{Id}&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">SampleResponse</span><span class="o">.</span><span class="n">SampleResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">getSamplePropertiesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getSamplePropertiesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getSamplePropertiesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the Properties of a Sample object</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the sample</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a PropertyList instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                        
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/samples/{Id}/properties&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">PropertiesResponse</span><span class="o">.</span><span class="n">PropertiesResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>    

    <span class="k">def</span> <span class="nf">getSampleFilesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getSampleFilesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getSampleFilesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of File objects associated with a Sample</span>
<span class="sd">        </span>
<span class="sd">        :param Id: A Sample id</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of File instances</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/samples/{Id}/files&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">File</span><span class="o">.</span><span class="n">File</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>        

    <span class="k">def</span> <span class="nf">getFilesBySample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getFilesBySample"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getFilesBySample">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        * Deprecated in favor of getSampleFilesById() *</span>
<span class="sd">        </span>
<span class="sd">        Returns a list of File objects associated with a Sample</span>
<span class="sd">        </span>
<span class="sd">        :param Id: A Sample id</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of File instances</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSampleFilesById</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="p">)</span>        
    
    <span class="k">def</span> <span class="nf">getFileById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getFileById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getFileById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a file object by Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the file</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a File instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/files/{Id}&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>            
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">FileResponse</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">getFilePropertiesById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getFilePropertiesById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getFilePropertiesById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the Properties of a file object by Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the file</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a PropertyList instance</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/files/{Id}/properties&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>            
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">PropertiesResponse</span><span class="o">.</span><span class="n">PropertiesResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getGenomeById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getGenomeById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getGenomeById">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns an instance of Genome with the specified Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The genome id</span>
<span class="sd">        :returns: a GenomeV1 instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/genomes/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">GenomeResponse</span><span class="o">.</span><span class="n">GenomeResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getAvailableGenomes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getAvailableGenomes"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAvailableGenomes">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of all available genomes</span>
<span class="sd">        </span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of GenomeV1 instances</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>                
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/genomes&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">GenomeV1</span><span class="o">.</span><span class="n">GenomeV1</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                
    <span class="k">def</span> <span class="nf">getIntervalCoverage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">,</span> <span class="n">StartPos</span><span class="p">,</span> <span class="n">EndPos</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getIntervalCoverage"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getIntervalCoverage">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns metadata about an alignment, including max coverage and cov granularity.</span>
<span class="sd">        Note that HrefCoverage must be available for the provided BAM file.       </span>
<span class="sd">        </span>
<span class="sd">        :param Id: the Id of a BAM file</span>
<span class="sd">        :param Chrom: chromosome name</span>
<span class="sd">        :param StartPos: get coverage starting at this position</span>
<span class="sd">        :param EndPos: get coverage up to and including this position; the returned EndPos may be larger than requested due to rounding up to nearest window end coordinate        </span>
<span class="sd">        :returns: a Coverage instance</span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/coverage/{Id}/{Chrom}&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;StartPos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">StartPos</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;EndPos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">EndPos</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Chrom}&#39;</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">CoverageResponse</span><span class="o">.</span><span class="n">CoverageResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getCoverageMetaInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getCoverageMetaInfo"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getCoverageMetaInfo">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns metadata about coverage of a chromosome.</span>
<span class="sd">        Note that HrefCoverage must be available for the provided BAM file</span>
<span class="sd">        </span>
<span class="sd">        :param Id: the Id of a Bam file</span>
<span class="sd">        :param Chrom: chromosome name</span>
<span class="sd">        :returns: a CoverageMetaData instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/coverage/{Id}/{Chrom}/meta&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Chrom}&#39;</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">CoverageMetaResponse</span><span class="o">.</span><span class="n">CoverageMetaResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">filterVariantSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">,</span> <span class="n">StartPos</span><span class="p">,</span> <span class="n">EndPos</span><span class="p">,</span> <span class="n">Format</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.filterVariantSet"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.filterVariantSet">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        List the variants in a set of variants. Note the maximum returned records is 1000.</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the variant file </span>
<span class="sd">        :param Chrom: Chromosome name</span>
<span class="sd">        :param StartPos: The start position of the sequence of interest</span>
<span class="sd">        :param EndPos: The start position of the sequence of interest</span>
<span class="sd">        :param Format: (optional) Format for results, possible values: &#39;vcf&#39; (not implemented yet), &#39;json&#39;(default, which actually returns an object)</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :returns: a list of Variant instances, when Format is json; a string, when Format is vcf</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateQueryParameters</span><span class="p">(</span><span class="n">queryPars</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/variantset/{Id}/variants/{Chrom}&#39;</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>        
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;StartPos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">StartPos</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;EndPos&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">EndPos</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;Format&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">Format</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Chrom}&#39;</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Format</span> <span class="o">==</span> <span class="s">&#39;vcf&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&quot;Returning native VCF format isn&#39;t yet supported by BaseSpacePy&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">Variant</span><span class="o">.</span><span class="n">Variant</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getVariantMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">Format</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.getVariantMetadata"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getVariantMetadata">[docs]</a>        <span class="sd">&#39;&#39;&#39;        </span>
<span class="sd">        Returns the header information of a VCF file.</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the VCF file</span>
<span class="sd">        :param Format: (optional) The return-value format, set to &#39;json&#39; (default) to return return an object (not actually json format), or &#39;vcf&#39; (not implemented yet) to return a string in VCF format.</span>
<span class="sd">        :returns: A VariantHeader instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/variantset/{Id}&#39;</span>        
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;Format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Format</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Format</span> <span class="o">==</span> <span class="s">&#39;vcf&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&quot;Returning native VCF format isn&#39;t yet supported by BaseSpacePy&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">VariantsHeaderResponse</span><span class="o">.</span><span class="n">VariantsHeaderResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                          <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
         
    <span class="k">def</span> <span class="nf">createAppResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">samples</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">appSessionId</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.createAppResult"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.createAppResult">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Create an AppResult object.</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the project in which the AppResult is to be added</span>
<span class="sd">        :param name: The name of the AppResult</span>
<span class="sd">        :param desc: A description of the AppResult</span>
<span class="sd">        :param samples: (Optional) A list of one or more Samples Ids that the AppResult is related to </span>
<span class="sd">        :param appSessionId: (Optional) If no appSessionId is given, the id used to initialize the BaseSpaceAPI instance will be used. If appSessionId is set equal to an empty string, a new appsession will be created for the appresult object </span>
<span class="sd">        :raises Exception: when attempting to create AppResult in an AppSession that has a status other than &#39;running&#39;.</span>
<span class="sd">        :returns: a newly created AppResult instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">appSessionId</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">appSessionId</span><span class="o">==</span><span class="bp">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;This BaseSpaceAPI instance has no appSessionId set and no alternative id was supplied for method createAppResult&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">samples</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">samples</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{ProjectId}/appresults&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{ProjectId}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">postData</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="k">if</span> <span class="n">appSessionId</span><span class="p">:</span>
            <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;appsessionid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">appSessionId</span>
        <span class="k">if</span> <span class="n">appSessionId</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;appsessionid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">appSessionId</span>      <span class="c"># default case, we use the current appsession</span>
        
        <span class="c"># add the sample references</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">):</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;Rel&quot;</span><span class="p">:</span> <span class="s">&quot;using&quot;</span><span class="p">,</span> <span class="s">&quot;Type&quot;</span><span class="p">:</span> <span class="s">&quot;Sample&quot;</span><span class="p">,</span> <span class="s">&quot;HrefContent&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">+</span> <span class="s">&#39;/samples/&#39;</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">Id</span><span class="p">}</span>
                <span class="n">ref</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
            <span class="n">postData</span><span class="p">[</span><span class="s">&#39;References&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">ref</span>
        <span class="c"># case, an appSession is provided, we need to check if the a</span>
        <span class="k">if</span> <span class="n">queryParams</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;appsessionid&#39;</span><span class="p">):</span>
            <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAppSession</span><span class="p">(</span><span class="n">Id</span><span class="o">=</span><span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;appsessionid&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">session</span><span class="o">.</span><span class="n">canWorkOn</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;AppSession status must be &quot;running,&quot; to create and AppResults. Current status is &#39;</span> <span class="o">+</span> <span class="n">session</span><span class="o">.</span><span class="n">Status</span><span class="p">)</span>
            
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;Name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;Description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">desc</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">AppResultResponse</span><span class="o">.</span><span class="n">AppResultResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            
    <span class="k">def</span> <span class="nf">appResultFileUpload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.appResultFileUpload"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.appResultFileUpload">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Uploads a file associated with an AppResult to BaseSpace and returns the corresponding file object.</span>
<span class="sd">        Small files are uploaded with a single-part upload method, while larger files (&lt; 25 MB) are uploaded</span>
<span class="sd">        with multipart upload.  </span>
<span class="sd">        </span>
<span class="sd">        :param Id: AppResult id.</span>
<span class="sd">        :param localPath: The local path to the file to be uploaded, including file name.</span>
<span class="sd">        :param fileName: The desired filename in the AppResult folder on the BaseSpace server.</span>
<span class="sd">        :param directory: The directory the file should be placed in on the BaseSpace server.</span>
<span class="sd">        :param contentType: The content-type of the file, eg. &#39;text/plain&#39; for text files, &#39;application/octet-stream&#39; for binary files</span>
<span class="sd">        :returns: a newly created File instance    </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">multipart_min_file_size</span> <span class="o">=</span> <span class="mi">25000000</span> <span class="c"># bytes</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">localPath</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">multipart_min_file_size</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">multipartFileUpload</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singlepartFileUpload__</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">)</span>        
        
    <span class="k">def</span> <span class="nf">__singlepartFileUpload__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">):</span></div>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Uploads a file associated with an AppResult to BaseSpace and returns the corresponding file object.</span>
<span class="sd">        Intended for small files -- reads whole file into memory prior to upload.</span>
<span class="sd">        </span>
<span class="sd">        :param Id: AppResult id.</span>
<span class="sd">        :param localPath: The local path to the file to be uploaded, including file name.</span>
<span class="sd">        :param fileName: The desired filename in the AppResult folder on the BaseSpace server.</span>
<span class="sd">        :param directory: The directory the file should be placed in on the BaseSpace server.</span>
<span class="sd">        :param contentType: The content-type of the file.</span>
<span class="sd">        :returns: a newly created File instance       </span>
<span class="sd">        &#39;&#39;&#39;</span>        
        <span class="n">method</span>                       <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="s">&#39;/appresults/{Id}/files&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span>                  <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>          <span class="o">=</span> <span class="n">fileName</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;directory&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="n">directory</span> 
        <span class="n">headerParams</span>                 <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contentType</span>                
        <span class="n">postData</span>                     <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">localPath</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">FileResponse</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> \
            <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            

    <span class="k">def</span> <span class="nf">__initiateMultipartFileUpload__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initiates multipart upload of a file to an AppResult in BaseSpace (does not actually upload file).  </span>
<span class="sd">        </span>
<span class="sd">        :param Id: AppResult id.        </span>
<span class="sd">        :param fileName: The desired filename in the AppResult folder on the BaseSpace server.</span>
<span class="sd">        :param directory: The directory the file should be placed in on the BaseSpace server.</span>
<span class="sd">        :param contentType: The content-type of the file, eg. &#39;text/plain&#39; for text files, &#39;application/octet-stream&#39; for binary files</span>
<span class="sd">        :returns: A newly created File instance      </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appresults/{Id}/files&#39;</span>        
        <span class="n">method</span>                       <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span>                  <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>          <span class="o">=</span> <span class="n">fileName</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;directory&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="n">directory</span> 
        <span class="n">headerParams</span>                 <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contentType</span>
                
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;multipart&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="s">&#39;true&#39;</span>
        <span class="n">postData</span>                     <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># Set force post as this need to use POST though no data is being streamed</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">FileResponse</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                  <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">forcePost</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>                    
               
    <span class="k">def</span> <span class="nf">__uploadMultipartUnit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">partNumber</span><span class="p">,</span> <span class="n">md5</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Uploads file part for multipart upload</span>
<span class="sd">        </span>
<span class="sd">        :param Id: file id </span>
<span class="sd">        :param partNumber: the file part to be uploaded</span>
<span class="sd">        :param md5: md5 sum of datastream</span>
<span class="sd">        :param data: the name of the file containing only data to be uploaded</span>
<span class="sd">        :returns: A dictionary of the server response, with a &#39;Response&#39; key that contains a dict, which contains an &#39;ETag&#39; key and value on success. On failure, this method returns None </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">method</span>                       <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="s">&#39;/files/{Id}/parts/{partNumber}&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{partNumber}&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">partNumber</span><span class="p">))</span>
        <span class="n">queryParams</span>                  <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span>                 <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Content-MD5&#39;</span><span class="p">:</span><span class="n">md5</span><span class="o">.</span><span class="n">strip</span><span class="p">()}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">callAPI</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">headerParams</span><span class="o">=</span><span class="n">headerParams</span><span class="p">,</span> <span class="n">forcePost</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>        

    <span class="k">def</span> <span class="nf">__finalizeMultipartFileUpload__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Marks a multipart upload file as complete  </span>
<span class="sd">        </span>
<span class="sd">        :param Id: the File Id</span>
<span class="sd">        :returns: a File instance with UploadStatus attribute updated to &#39;complete&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="s">&#39;/files/{Id}&#39;</span>        
        <span class="n">method</span>                       <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">headerParams</span>                 <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span>                  <span class="o">=</span> <span class="p">{</span><span class="s">&#39;uploadstatus&#39;</span><span class="p">:</span><span class="s">&#39;complete&#39;</span><span class="p">}</span>
        <span class="n">postData</span>                     <span class="o">=</span> <span class="bp">None</span>        
        <span class="c"># Set force post as this need to use POST though no data is being streamed</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">FileResponse</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">,</span> <span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> \
            <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span> <span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">forcePost</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">multipartFileUpload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">,</span> <span class="n">tempDir</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">processCount</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">partSize</span><span class="o">=</span><span class="mi">25</span><span class="p">):</span>
<div class="viewcode-block" id="BaseSpaceAPI.multipartFileUpload"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.multipartFileUpload">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Method for multi-threaded file-upload for parallel transfer of very large files (currently only runs on unix systems)</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The AppResult ID</span>
<span class="sd">        :param localPath: The local path of the file to upload, including file name; local path will not be stored in BaseSpace (use directory argument for this)</span>
<span class="sd">        :param fileName: The desired filename on the server</span>
<span class="sd">        :param directory: The desired directory name on the server (empty string will place it in the root directory)</span>
<span class="sd">        :param contentType: The content type of the file</span>
<span class="sd">        :param tempdir: (optional) Temp directory to use for temporary file chunks to upload</span>
<span class="sd">        :param processCount: (optional) The number of processes to be used, default 10</span>
<span class="sd">        :param partSize: (optional) The size in MB of individual upload parts (must be &gt;5 Mb and &lt;=25 Mb), default 25</span>
<span class="sd">        :returns: a File instance, which has been updated after the upload has completed.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># First create file object in BaseSpace, then create multipart upload object and start upload</span>
        <span class="k">if</span> <span class="n">partSize</span> <span class="o">&lt;=</span> <span class="mi">5</span> <span class="ow">or</span> <span class="n">partSize</span> <span class="o">&gt;</span> <span class="mi">25</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UploadPartSizeException</span><span class="p">(</span><span class="s">&quot;Multipart upload partSize must be &gt;5 MB and &lt;=25 MB&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tempDir</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">tempDir</span> <span class="o">=</span> <span class="n">mkdtemp</span><span class="p">()</span>
        <span class="n">bsFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__initiateMultipartFileUpload__</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">)</span>
        <span class="n">myMpu</span> <span class="o">=</span> <span class="n">mpu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">bsFile</span><span class="p">,</span> <span class="n">processCount</span><span class="p">,</span> <span class="n">partSize</span><span class="p">,</span> <span class="n">temp_dir</span><span class="o">=</span><span class="n">tempDir</span><span class="p">)</span>                
        <span class="k">return</span> <span class="n">myMpu</span><span class="o">.</span><span class="n">upload</span><span class="p">()</span>                

    <span class="k">def</span> <span class="nf">fileDownload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">localDir</span><span class="p">,</span> <span class="n">byteRange</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">createBsDir</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.fileDownload"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.fileDownload">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a BaseSpace file to a local directory, and names the file with the BaseSpace file name.</span>
<span class="sd">        If the File has a directory in BaseSpace, it will be re-created locally in the provided localDir </span>
<span class="sd">        (to disable this, set createBsPath=False).</span>
<span class="sd">        </span>
<span class="sd">        If the file is large, multi-part download will be used. </span>
<span class="sd">        </span>
<span class="sd">        Byte-range requests are supported for only small byte ranges (single-part downloads).</span>
<span class="sd">        Byte-range requests are restricted to a single request of &#39;start&#39; and &#39;end&#39; bytes, without support for</span>
<span class="sd">        negative or empty values for &#39;start&#39; or &#39;end&#39;.</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The file id</span>
<span class="sd">        :param localDir: The local directory to place the file in    </span>
<span class="sd">        :param byteRange: (optional) The byte range of the file to retrieve, provide a 2-element list with start and end byte values</span>
<span class="sd">        :param createBsDir: (optional) create BaseSpace File&#39;s directory inside localDir (default: False)</span>
<span class="sd">        :raises ByteRangeException: if the provided byte range is invalid</span>
<span class="sd">        :returns: a File instance                </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">multipart_min_file_size</span> <span class="o">=</span> <span class="mi">5000000</span> <span class="c"># bytes</span>
        <span class="k">if</span> <span class="n">byteRange</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rangeSize</span> <span class="o">=</span> <span class="n">byteRange</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">byteRange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ByteRangeException</span><span class="p">(</span><span class="s">&quot;Byte range must include both start and end byte values&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rangeSize</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ByteRangeException</span><span class="p">(</span><span class="s">&quot;Byte range must have smaller byte number first&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rangeSize</span> <span class="o">&gt;</span> <span class="n">multipart_min_file_size</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ByteRangeException</span><span class="p">(</span><span class="s">&quot;Byte range </span><span class="si">%d</span><span class="s"> larger than maximum allowed size </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rangeSize</span><span class="p">,</span> <span class="n">multipart_min_file_size</span><span class="p">))</span>
                
        <span class="n">bsFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFileById</span><span class="p">(</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">bsFile</span><span class="o">.</span><span class="n">Size</span> <span class="o">&lt;</span> <span class="n">multipart_min_file_size</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">byteRange</span> <span class="ow">and</span> <span class="p">(</span><span class="n">rangeSize</span> <span class="o">&lt;</span> <span class="n">multipart_min_file_size</span><span class="p">)):</span>
            <span class="c"># append File&#39;s directory to local dir, and create this path if it doesn&#39;t exist</span>
            <span class="n">localDest</span> <span class="o">=</span> <span class="n">localDir</span>
            <span class="k">if</span> <span class="n">createBsDir</span><span class="p">:</span>            
                <span class="n">localDest</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">localDir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">bsFile</span><span class="o">.</span><span class="n">Path</span><span class="p">))</span>            
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">localDest</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">localDest</span><span class="p">)</span>            
            <span class="bp">self</span><span class="o">.</span><span class="n">__downloadFile__</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">localDest</span><span class="p">,</span> <span class="n">bsFile</span><span class="o">.</span><span class="n">Name</span><span class="p">,</span> <span class="n">byteRange</span><span class="p">,</span> <span class="n">standaloneRangeFile</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">bsFile</span>
        <span class="k">else</span><span class="p">:</span>                        
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">multipartFileDownload</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">localDir</span><span class="p">,</span> <span class="n">createBsDir</span><span class="o">=</span><span class="n">createBsDir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__downloadFile__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">localDir</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">byteRange</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">standaloneRangeFile</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">lock</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="c">#@ReservedAssignment</span></div>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a BaseSpace file to a local directory. </span>
<span class="sd">        Supports byte-range requests; by default will seek() into local file for multipart downloads, </span>
<span class="sd">        with option to save only range data in standalone file (no seek()).</span>
<span class="sd">        </span>
<span class="sd">        This method is for downloading relatively small files, eg. &lt; 5 MB. </span>
<span class="sd">        For larger files, use multipart download (which uses this method for file parts).                </span>
<span class="sd">        </span>
<span class="sd">        :param Id: The file id</span>
<span class="sd">        :param localDir: The local directory to place the file in</span>
<span class="sd">        :param name: The name of the local file</span>
<span class="sd">        :param byteRange: (Optional) The byte range of the file to retrieve, provide a 2-element list with start and end byte values</span>
<span class="sd">        :param standaloneRangeFile: (Optional) if True store only byte-range data in standalone file</span>
<span class="sd">        :param lock: (Optional) Multiprocessing lock to prevent multiple processes from writing to same output file concurrently - only needed when using multipart download</span>
<span class="sd">        :raises Exception: if REST API call to BaseSpace server fails</span>
<span class="sd">        :raises DownloadFailedException: if downloaded file size doesn&#39;t match the size in BaseSpace</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">byteRange</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">byteRange</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/files/{Id}/content&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;redirect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;meta&#39;</span> <span class="c"># we need to add this parameter to get the Amazon link directly </span>
        
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">callAPI</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;BaseSpace error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;Message&#39;</span><span class="p">])</span>
        
        <span class="c"># get the Amazon URL, then do the download; for range requests include</span>
        <span class="c"># size to ensure reading until end of data stream. Create local file if</span>
        <span class="c"># it doesn&#39;t exist (don&#39;t truncate in case other processes from </span>
        <span class="c"># multipart download also do this)</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;Response&#39;</span><span class="p">][</span><span class="s">&#39;HrefContent&#39;</span><span class="p">])</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">localDir</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">iter_size</span> <span class="o">=</span> <span class="mi">16</span><span class="o">*</span><span class="mi">1024</span> <span class="c"># python default</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">byteRange</span><span class="p">):</span>
            <span class="n">req</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&#39;Range&#39;</span><span class="p">,</span> <span class="s">&#39;bytes=</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">byteRange</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">byteRange</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">flo</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getTimeout</span><span class="p">())</span> <span class="c"># timeout prevents blocking                </span>
        <span class="n">totRead</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;r+b&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">byteRange</span><span class="p">)</span> <span class="ow">and</span> <span class="n">standaloneRangeFile</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">byteRange</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">flo</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">iter_size</span><span class="p">)</span>                
            <span class="k">while</span> <span class="n">cur</span><span class="p">:</span>                             
                <span class="k">if</span> <span class="n">lock</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>                           
                        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cur</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cur</span><span class="p">)</span>
                <span class="n">totRead</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cur</span><span class="p">)</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">flo</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">iter_size</span><span class="p">)</span>
        <span class="c"># check that actual downloaded byte size is correct</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">byteRange</span><span class="p">):</span>
            <span class="n">expSize</span> <span class="o">=</span> <span class="n">byteRange</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">byteRange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">totRead</span> <span class="o">!=</span> <span class="n">expSize</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DownloadFailedException</span><span class="p">(</span><span class="s">&quot;Ranged download size is not as expected: </span><span class="si">%d</span><span class="s"> vs </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">totRead</span><span class="p">,</span> <span class="n">expSize</span><span class="p">))</span>        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bsFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFileById</span><span class="p">(</span><span class="n">Id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">totRead</span> <span class="o">!=</span> <span class="n">bsFile</span><span class="o">.</span><span class="n">Size</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DownloadFailedException</span><span class="p">(</span><span class="s">&quot;Downloaded file size doesn&#39;t match file size in BaseSpace: </span><span class="si">%d</span><span class="s"> vs </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">totRead</span><span class="p">,</span> <span class="n">bsFile</span><span class="o">.</span><span class="n">Size</span><span class="p">))</span>                     

    <span class="k">def</span> <span class="nf">multipartFileDownload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">localDir</span><span class="p">,</span> <span class="n">processCount</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">partSize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">createBsDir</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">tempDir</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
<div class="viewcode-block" id="BaseSpaceAPI.multipartFileDownload"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.multipartFileDownload">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Method for multi-threaded file-download for parallel transfer of very large files (currently only runs on unix systems)        </span>
<span class="sd">        </span>
<span class="sd">        :param Id: The ID of the File to download </span>
<span class="sd">        :param localDir: The local path in which to store the downloaded file</span>
<span class="sd">        :param processCount: (optional) The number of processes to be used, default 10</span>
<span class="sd">        :param partSize: (optional) The size in MB of individual file parts to download, default 25</span>
<span class="sd">        :param createBsDir: (optional) create BaseSpace File&#39;s directory in local_dir, default False        </span>
<span class="sd">        :param tempDir: (optional) Set temp directory to use debug mode, which stores downloaded file chunks in individual files, then completes by &#39;cat&#39;ing chunks into large file</span>
<span class="sd">        :returns: a File instance </span>
<span class="sd">        &#39;&#39;&#39;</span>         
        <span class="n">myMpd</span> <span class="o">=</span> <span class="n">mpd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">localDir</span><span class="p">,</span> <span class="n">processCount</span><span class="p">,</span> <span class="n">partSize</span><span class="p">,</span> <span class="n">createBsDir</span><span class="p">,</span> <span class="n">tempDir</span><span class="p">)</span>        
        <span class="k">return</span> <span class="n">myMpd</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>        

    <span class="k">def</span> <span class="nf">fileUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.fileUrl"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.fileUrl">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        ** Deprecated in favor of fileS3metadata() **</span>
<span class="sd">        </span>
<span class="sd">        Returns URL of file (on S3)</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The file id</span>
<span class="sd">        :raises Exception: if REST API call to BaseSpace server fails</span>
<span class="sd">        :returns: a URL</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/files/{Id}/content&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;redirect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;meta&#39;</span> <span class="c"># we need to add this parameter to get the Amazon link directly </span>
        
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">callAPI</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;BaseSpace error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;Message&#39;</span><span class="p">])</span>                
        <span class="k">return</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;Response&#39;</span><span class="p">][</span><span class="s">&#39;HrefContent&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">fileS3metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">):</span></div>
<div class="viewcode-block" id="BaseSpaceAPI.fileS3metadata"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.fileS3metadata">[docs]</a>        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the S3 url and etag (md5 for small files uploaded as a single part) for a BaseSpace file</span>
<span class="sd">                </span>
<span class="sd">        :param Id: The file id</span>
<span class="sd">        :raises Exception: if REST API call to BaseSpace server fails</span>
<span class="sd">        :returns: Dict with s3 url (&#39;url&#39; key) and etag (&#39;etag&#39; key)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/files/{Id}/content&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;redirect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;meta&#39;</span> <span class="c"># we need to add this parameter to get the Amazon link directly </span>
        
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">callAPI</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;BaseSpace error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;Message&#39;</span><span class="p">])</span>
        
        <span class="c"># record S3 URL</span>
        <span class="n">ret</span><span class="p">[</span><span class="s">&#39;url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;Response&#39;</span><span class="p">][</span><span class="s">&#39;HrefContent&#39;</span><span class="p">]</span>
        
        <span class="c"># TODO should use HEAD call here, instead do small GET range request</span>
        <span class="c"># GET S3 url and record etag         </span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;Response&#39;</span><span class="p">][</span><span class="s">&#39;HrefContent&#39;</span><span class="p">])</span>        
        <span class="n">req</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&#39;Range&#39;</span><span class="p">,</span> <span class="s">&#39;bytes=</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>         
        <span class="n">flo</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getTimeout</span><span class="p">())</span> <span class="c"># timeout prevents blocking  </span>
        <span class="k">try</span><span class="p">:</span>        
            <span class="n">etag</span> <span class="o">=</span> <span class="n">flo</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;etag&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">etag</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="c"># strip quotes from etag</span>
        <span class="k">if</span> <span class="n">etag</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">etag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">):</span>
            <span class="n">etag</span> <span class="o">=</span> <span class="n">etag</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ret</span><span class="p">[</span><span class="s">&#39;etag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">etag</span>                                                
        <span class="k">return</span> <span class="n">ret</span>
    
    <span class="k">def</span> <span class="nf">_validateQueryParameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryPars</span><span class="p">):</span></div>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initializes and validates Query Parameter arguments</span>
<span class="sd">        </span>
<span class="sd">        :param queryPars: a QueryParameter object        </span>
<span class="sd">        :return: dictionary of query parameters</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">queryPars</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">queryPars</span> <span class="o">=</span> <span class="n">qp</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>                        
            <span class="k">raise</span> <span class="n">QueryParameterException</span><span class="p">(</span><span class="s">&quot;Query parameter argument must be a QueryParameter object&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>        
</pre></div></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../../../index.html">BaseSpacePy 0.2 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Illumina.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>